<!DOCTYPE html>
<html>
	<head>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		<link href="../static/css/style.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
		<script src="{{url_for('static', filename='JS/functions.js')}}"></script>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Gugi&display=swap" rel="stylesheet">
	</head>
	<body>
		<h1 id="title"> <a href="/" style="color:white">Pick-A-Prof</a> </h1>
		<form style="text-align:center;" action="" method="POST">
			<label> What class do you want? </label>
			<input id="searchbar" class="form-control" type="text" placeholder="Enter Class Code (ex. 121)" aria-label="Search" name="query" value={{request.form.query}}>
			<button id="searchbutton" class="btn" type=”submit”> Search </button>
		</form>
		<div id="mainTable"  style="text-align: center;color:white">
			{% if data[0][0]|length > 0 %}
			<table id="example" class=" compact stripe row-border" style="width:80%;" >
				<thead>
					<tr id="Colnames" >
								<td>Name </td>
								<td>GPA </td>
								<td>Rating </td>
								<td>Number of Reviews </td>
								<td>Retake % </td>
								<td>Difficulty </td>
								<td>Comments </td>
					</tr>
				</thead>
				<tbody style="color:black">
						{% for result in data[0] %}
						<tr>
							{% if data[1][loop.index0] |length > 0 %}
							<td> <a style="color:#500000" href="https://www.ratemyprofessors.com/ShowRatings.jsp?tid={{data[1][loop.index0][0]}}" target="_blank" rel="noreferrer noopener">{{result[1]}}</a> </td>
							<td> {{'%0.2f'|format(result[2]) }} </td>
							{% if data[1][loop.index0][3] == -1 %}
							<td>  </td>
							<td> {{data[1][loop.index0][4]}} </td>
							<td>0</td>
							<td> </td>
							<td> {{data[1][loop.index0][7]}} </td>
							{%else%}
							<td> {{data[1][loop.index0][3]}} </td>
							<td> {{data[1][loop.index0][4]}} </td>
							<td> {{data[1][loop.index0][5]}} </td>
							<td> {{data[1][loop.index0][6]}} </td>
							<td> {{data[1][loop.index0][7]}} </td>
							{%endif%}
							{% else %}
							<td> {{result[1]}}</td>
							<td> {{'%0.2f'|format(result[2]) }} </td>
							<td>  </td>
							<td> 0 </td>
							<td> 0 </td>
							<td>  </td>
							<td> N/A </td>
							{%endif%}

						</tr>
						{%endfor%}
				</tbody>
			</table>
			{% else %}
						<div class="square">
							<h2 id="cfc-head" >Cannot Find Course!</h2>
							<p id="cfc-body">Please check your search if you’ve typed the correct course number or if it exists.</p>
						</div>
			<img class="csce-logo" src="https://wjm.s3.amazonaws.com/wpdnextgen/uploads/kwaskom.png" alt="CSCE Department Logo">
			{% endif %}
      
    	</div>


		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	</body>
</html>
